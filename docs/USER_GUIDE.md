# Output Management Tool - ユーザーガイド

**バージョン**: 2.0.0（ドラフト）  
**最終更新**: 2025年10月21日  
**Phase**: V2.0.0対応（フェーズ3実装後に正式版リリース予定）

> **📝 注意**: このドキュメントはV2.0.0のドラフト版です。フェーズ3（フロントエンド実装）完了後に正式版として更新されます。

---

## 📖 目次

1. [クイックスタート](#クイックスタート)
2. [基本操作](#基本操作)
3. [プロジェクト管理](#プロジェクト管理)
4. [工程管理](#工程管理)
5. [階層管理と詳細表](#階層管理と詳細表)
6. [BPMNダイアグラム](#bpmnダイアグラム)
7. [マニュアル管理](#マニュアル管理)
8. [三位一体同期](#三位一体同期)
9. [カスタム列機能](#カスタム列機能)
10. [インポート・エクスポート](#インポートエクスポート)
11. [トラブルシューティング](#トラブルシューティング)

---

## クイックスタート

**所要時間**: 15分

### Step 1: プロジェクトを作成

1. **📁 プロジェクト** メニューをクリック
2. **新規プロジェクト** ボタンをクリック
3. プロジェクト名を入力（例: "営業部門プロセス"）
4. **作成** をクリック

✅ プロジェクトが作成されました！

---

### Step 2: 工程を追加

#### 方法1: 手動で作成

1. **工程を追加** ボタンをクリック
2. 以下を入力:
   - 工程名: "顧客対応業務"
   - レベル: **大工程 (Level 1)**
   - 部署名: "営業部"
3. **保存** をクリック

#### 方法2: Excelからインポート

1. **Excelインポート** ボタンをクリック
2. **テンプレートをダウンロード** をクリック
3. Excelファイルにデータを入力
4. **ファイルを選択** で入力したExcelを選択
5. **インポート** をクリック

✅ 工程が追加されました！

---

### Step 3: 階層を構築

1. **🌳 階層管理** メニューをクリック
2. 工程を追加して階層を作成:
   - 大工程: 顧客対応業務（営業部）
     - 中工程: 見積作成（営業担当）
       - 小工程: 見積書作成（見積書）
         - 詳細工程: 単価計算

💡 **ヒント**: ドラッグ&ドロップでも階層を変更できます！

✅ 階層構造が完成しました！

---

### Step 4: BPMNダイアグラムを作成（オプション）

1. プロジェクト詳細画面で **BPMNエディタを開く** をクリック
2. 左側のパレットから要素をドラッグ:
   - 📍 **開始イベント** を配置
   - 📝 **タスク** を追加（例: "見積依頼受付"）
   - 🔀 **ゲートウェイ** で分岐を表現
   - 🏁 **終了イベント** で完了
3. 要素を矢印で接続
4. **保存** をクリック

✅ プロセスが可視化されました！

---

### Step 5: マニュアルを作成

1. プロジェクト詳細画面で **マニュアル** ボタンをクリック
2. **プロセスから生成** ボタンをクリック
3. 生成オプションを確認して **生成** をクリック
4. 自動的に作成されたマニュアルを確認

💡 **ヒント**: 工程表から自動的にマニュアルが生成されます！

✅ 手順書が完成しました！

---

### Step 6: 三位一体同期を体験

1. プロジェクト詳細画面の紫色のバナー **三位一体同期ダッシュボード** をクリック
2. **Full Sync** ボタンをクリック
3. BPMN → 工程表 → マニュアルが一括同期されます
4. **Auto Sync** トグルをONにして自動同期を有効化

💡 **ヒント**: BPMNを編集すると、工程表とマニュアルが自動的に更新されます！

✅ すべてのデータが連携されました！

---

## 基本操作

### 初回起動

1. アプリケーションを起動すると、ホーム画面が表示されます
2. 左側のサイドバーから各機能にアクセスできます
3. 右上の検索バーで工程を検索できます

### サイドバーメニュー

- **🏠 ホーム**: ダッシュボード画面
- **📁 プロジェクト**: プロジェクト一覧
- **🔄 工程管理**: 全工程の一覧と編集
- **🌳 階層管理**: 階層構造の可視化と編集
- **📊 BPMN**: BPMNダイアグラム編集
- **📖 マニュアル**: 手順書作成・管理
- **🔄 Trinity**: 三位一体同期ダッシュボード
- **📌 バージョン**: バージョン履歴と管理
- **⚙️ 設定**: アプリケーション設定

### ショートカットキー

- `Ctrl/Cmd + N`: 新規プロジェクト作成
- `Ctrl/Cmd + S`: 保存
- `Ctrl/Cmd + F`: 検索
- `Ctrl/Cmd + Z`: 元に戻す（BPMNエディタ内）
- `Ctrl/Cmd + Y`: やり直す（BPMNエディタ内）

---

## プロジェクト管理

### プロジェクトの作成

1. サイドバーから **📁 プロジェクト** をクリック
2. 右上の **新規プロジェクト** ボタンをクリック
3. プロジェクト情報を入力
   - **プロジェクト名** (必須): わかりやすい名前を付けます
   - **説明**: プロジェクトの概要や目的を記述
4. **作成** ボタンをクリック

### プロジェクトの編集

1. プロジェクト一覧からプロジェクトをクリック
2. プロジェクト詳細画面で **編集** ボタンをクリック
3. 情報を修正
4. **保存** をクリック

### プロジェクトの削除

1. プロジェクト一覧でプロジェクトの **...** メニューをクリック
2. **削除** を選択
3. 確認ダイアログで **削除** をクリック

⚠️ **警告**: 削除すると、すべての工程、BPMN、マニュアルも削除されます。

---

## 工程管理

### 工程レベルについて

工程は以下の4段階の階層で管理します:

| レベル | 名称 | 説明 | 必須フィールド |
|--------|------|------|----------------|
| **Level 1** | 大工程 | 部署レベルの工程 | 部署名、部署コード |
| **Level 2** | 中工程 | 作業実行者レベルの工程 | 作業実行者、役職 |
| **Level 3** | 小工程 | 帳票レベルの工程 | 帳票種類、帳票番号 |
| **Level 4** | 詳細工程 | 最小作業単位 | 所要時間、チェックポイント |

### 工程の作成

1. プロジェクト詳細画面で **工程を追加** をクリック
2. 工程情報を入力:
   - **工程名** (必須)
   - **レベル** (必須)
   - **親工程** (Level 2以上の場合)
   - レベル固有のフィールド
3. **保存** をクリック

### 工程の編集

1. 工程一覧で工程をダブルクリック、または **編集** ボタンをクリック
2. 情報を修正
3. **保存** をクリック

### 工程の削除

1. 工程の **...** メニューをクリック
2. **削除** を選択
3. 確認ダイアログで **削除** をクリック

⚠️ **警告**: 親工程を削除すると、すべての子工程も削除されます。

---

## 階層管理と詳細表

### 階層表示モード

階層管理画面では2つの表示モードがあります:

1. **ツリービュー**: 階層構造をツリー形式で表示
2. **テーブルビュー**: 階層構造を表形式で表示

### 詳細表機能（Phase 8 NEW!）

各工程に対して、さらに詳細な工程を管理するための「詳細表」を作成できます。

#### 詳細表の作成

1. 階層管理画面で工程を選択
2. **詳細表作成** ボタン（緑色のフォルダープラスアイコン）をクリック
3. 詳細表が作成され、URLが `?detail=root_...` に変わります
4. パンくずリストに「詳細表」が表示されます

#### 詳細表の表示

1. 詳細表を持つ工程には **詳細表** ボタン（紫色のフォルダーアイコン）が表示されます
2. このボタンをクリックすると詳細表を開きます

#### 上位工程に戻る

1. 詳細表表示中は、ヘッダーに **上位工程に戻る** ボタンが表示されます
2. このボタンをクリックすると通常の階層表示に戻ります

💡 **ヒント**: 詳細表は4段階まで（大工程→中工程→小工程→詳細工程）。上位階層の1工程に対して下位工程表は0または1つです。

### ドラッグ&ドロップ

1. 工程をドラッグ
2. 目的の親工程にドロップ
3. 階層関係が自動的に更新されます

---

## BPMNダイアグラム

### BPMNエディタの起動

1. プロジェクト詳細画面で **BPMNエディタを開く** をクリック
2. bpmn-jsエディタが開きます

### 要素の配置

左側のパレットから要素をドラッグ&ドロップ:

- **📍 開始イベント**: プロセスの開始点
- **📝 タスク**: 作業単位
- **🔀 ゲートウェイ**: 分岐・結合
- **🏁 終了イベント**: プロセスの終了点
- **➡️ シーケンスフロー**: 要素間の接続

### 要素の編集

1. 要素をクリックして選択
2. 右側のプロパティパネルで情報を編集
3. 要素名をダブルクリックで直接編集

### BPMNショートカット

- **Ctrl/Cmd + Z**: 元に戻す
- **Ctrl/Cmd + Y**: やり直す
- **Ctrl/Cmd + マウスホイール**: ズーム
- **スペース + ドラッグ**: キャンバス移動
- **Delete**: 選択した要素を削除

---

## マニュアル管理

### マニュアルの作成

#### 方法1: 工程から自動生成

1. プロジェクト詳細画面で **マニュアル** をクリック
2. **プロセスから生成** ボタンをクリック
3. 生成オプションを確認:
   - セクション構造
   - 含める情報
4. **生成** をクリック

#### 方法2: 手動作成

1. マニュアル画面で **新規セクション** をクリック
2. セクション名を入力
3. Markdownでコンテンツを記述

### マニュアルの編集

- **左側パネル**: セクションツリー（ドラッグ&ドロップで並び替え可能）
- **中央エディタ**: Markdown形式で編集
- **右側プレビュー**: リアルタイムプレビュー

### Markdown記法

```markdown
# 見出し1
## 見出し2
### 見出し3

**太字** *斜体*

- 箇条書き1
- 箇条書き2

1. 番号付きリスト1
2. 番号付きリスト2

[リンクテキスト](URL)

`インラインコード`

\```
コードブロック
\```
```

---

## 三位一体同期

### 三位一体同期とは

BPMN・工程表・マニュアルを自動的に連携・同期する機能です。

### 同期ダッシュボード

1. プロジェクト詳細画面の紫色のバナー **三位一体同期ダッシュボード** をクリック
2. 現在の同期状態を確認

### 同期機能

| 同期方向 | 説明 | 使用シーン |
|---------|------|-----------|
| **BPMN → Process** | BPMNのタスクを工程に変換 | BPMNを先に作成した場合 |
| **Process → BPMN** | 工程からBPMNを生成 | 工程表を先に作成した場合 |
| **Process → Manual** | 工程からマニュアルを生成 | マニュアルを自動作成したい場合 |
| **Full Sync** | 3つすべてを一括同期 | 全体を同期したい場合 |

### 自動同期

1. 三位一体ダッシュボードで **Auto Sync** トグルをONにする
2. BPMNを編集すると自動的に工程表とマニュアルが更新されます

⚠️ **注意**: 自動同期は既存データを上書きする可能性があります。

---

## カスタム列機能

### 概要

カスタム列機能を使用すると、プロジェクトの要件に応じて工程表に独自の列を追加できます。各プロジェクトは最大30個のカスタム列を持つことができます。

### 使用例

**製造業プロジェクト**
- 予算（数値）
- 使用設備（選択肢）
- 品質基準（テキスト）
- 安全確認完了（真偽値）

**IT開発プロジェクト**
- 見積工数（数値）
- 担当チーム（選択肢）
- 技術スタック（テキスト）
- コードレビュー完了（真偽値）

### 列の追加

1. **設定画面を開く**
   - サイドバーの「設定」アイコンをクリック
   - 「カスタム列」タブを選択

2. **新規列を作成**
   - 「+ 列を追加」ボタンをクリック
   - 列名を入力（例: "予算"）
   - データ型を選択

### データ型

| データ型 | 説明 | 入力例 |
|---------|------|--------|
| テキスト | 自由記述 | "マーケティング資料" |
| 数値 | 整数・小数 | 1000000, 12.5 |
| 日付 | 日付選択 | 2025-10-19 |
| 選択肢 | プルダウン | "高", "中", "低" |
| 真偽値 | チェックボックス | ✓ / ✗ |

### オプション設定

- **必須入力**: ONにすると入力が必須
- **デフォルト値**: 新規工程作成時の初期値
- **表示**: OFFにすると表に表示されない

### 列の編集・削除

1. 列名をクリックして編集モードに
2. 設定を変更して **保存**
3. 削除する場合は **...** メニュー → **削除**

⚠️ **警告**: 列を削除すると、すべての工程のその列のデータも削除されます。

---

## インポート・エクスポート

### Excelインポート

1. **Excelインポート** ボタンをクリック
2. **テンプレートをダウンロード** で雛形を取得
3. Excelファイルに工程データを入力
4. **ファイルを選択** でExcelファイルを選択
5. **インポート** をクリック

### Excelエクスポート

1. **Excelエクスポート** ボタンをクリック
2. エクスポートオプションを選択:
   - 含める列
   - 階層表示
3. **エクスポート** をクリック
4. ファイルの保存先を選択

### CSV形式

CSVファイルでもインポート・エクスポート可能です。

---

## トラブルシューティング

### プロジェクトが開けない

1. アプリケーションを再起動
2. データベースファイルの整合性を確認
3. バックアップから復元

### 工程が保存できない

1. 必須フィールドが入力されているか確認
2. 親工程が存在するか確認（Level 2以上の場合）
3. ストレージの空き容量を確認

### BPMNエディタが表示されない

1. ブラウザのキャッシュをクリア
2. アプリケーションを再起動
3. 最新版にアップデート

### 同期がうまくいかない

1. 三位一体ダッシュボードで同期状態を確認
2. エラーログを確認
3. 手動で **Full Sync** を実行

### データが消えた

1. バージョン管理から過去のバージョンを復元
2. データベースバックアップから復元

---

## サポート

問題が解決しない場合は、以下を参照してください:

- **ドキュメント**: `docs/` フォルダ内のドキュメント
- **GitHub Issues**: バグ報告や機能要望
- **開発者ガイド**: `docs/DEVELOPMENT.md`

---

**最終更新**: 2025年10月19日  
**バージョン**: 0.6.0
