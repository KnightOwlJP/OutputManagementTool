# Output Management Tool - ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä»•æ§˜æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ20æ—¥  
**Phase**: Phase 8å®Œäº†ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤ã€4æ®µéšå›ºå®šéšå±¤ï¼‰

---

## ğŸ“– ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡)
3. [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](#ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
5. [éšå±¤æ§‹é€ ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 8ï¼‰](#éšå±¤æ§‹é€ ã‚·ã‚¹ãƒ†ãƒ phase-8)
6. [ä¸‰ä½ä¸€ä½“åŒæœŸã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 6ï¼‰](#ä¸‰ä½ä¸€ä½“åŒæœŸã‚·ã‚¹ãƒ†ãƒ phase-6)
7. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
8. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
9. [APIè¨­è¨ˆ](#apiè¨­è¨ˆ)

---

## æ¦‚è¦

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„

å·¥ç¨‹è¡¨ãƒ»BPMNãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆãƒ»ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ä¸‰ä½ä¸€ä½“ã§çµ±åˆç®¡ç†ã—ã€éšå±¤çš„ãªå·¥ç¨‹ç®¡ç†ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’å®Ÿç¾ã™ã‚‹ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

### ã‚³ã‚¢ä¾¡å€¤

- **å·¥ç¨‹è¡¨ â‡” BPMNãƒ•ãƒ­ãƒ¼**: 1å¯¾1ã®å®Œå…¨åŒæœŸ
- **å·¥ç¨‹ â‡” BPMNã‚¿ã‚¹ã‚¯**: 1å¯¾1ã®å®Œå…¨åŒæœŸ
- **å·¥ç¨‹è¡¨ â†’ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«**: è‡ªå‹•ç”Ÿæˆ
- **ä¸‰ä½ä¸€ä½“ç®¡ç†**: ä¸€ç®‡æ‰€ã®å¤‰æ›´ãŒå…¨ä½“ã«æ³¢åŠã—ã€å¸¸ã«æ•´åˆæ€§ã‚’ä¿ã¤

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡

### 1. å·¥ç¨‹è¡¨ã¨BPMNãƒ•ãƒ­ãƒ¼ã®1å¯¾1å¯¾å¿œ

```
å·¥ç¨‹è¡¨ï¼ˆProcess Tableï¼‰ â‡” BPMNãƒ•ãƒ­ãƒ¼å›³ï¼ˆ1å¯¾1ï¼‰
å·¥ç¨‹ï¼ˆProcessï¼‰       â‡” BPMNã‚¿ã‚¹ã‚¯ï¼ˆ1å¯¾1ï¼‰
```

**ãƒ«ãƒ¼ãƒ«**:
- 1ã¤ã®å·¥ç¨‹è¡¨ã«å¯¾ã—ã¦1ã¤ã®BPMNãƒ•ãƒ­ãƒ¼å›³ãŒå¯¾å¿œ
- 1ã¤ã®å·¥ç¨‹ã«å¯¾ã—ã¦1ã¤ã®BPMNã‚¿ã‚¹ã‚¯ãŒå¯¾å¿œ
- å®Œå…¨åŒæœŸï¼šå·¥ç¨‹ã‚’ç·¨é›†ã™ã‚‹ã¨BPMNãŒæ›´æ–°ã•ã‚Œã€BPMNã‚’ç·¨é›†ã™ã‚‹ã¨å·¥ç¨‹ãŒæ›´æ–°
- `processId` ã¨ `bpmnDiagramId` ã§ç›¸äº’å‚ç…§

### 2. 4æ®µéšå›ºå®šéšå±¤

```
Level 1: å¤§å·¥ç¨‹è¡¨ï¼ˆLarge Process Tableï¼‰
   â†“ 0ã¾ãŸã¯1ã¤ã®ä¸‹ä½å·¥ç¨‹è¡¨
Level 2: ä¸­å·¥ç¨‹è¡¨ï¼ˆMedium Process Tableï¼‰
   â†“ 0ã¾ãŸã¯1ã¤ã®ä¸‹ä½å·¥ç¨‹è¡¨
Level 3: å°å·¥ç¨‹è¡¨ï¼ˆSmall Process Tableï¼‰
   â†“ 0ã¾ãŸã¯1ã¤ã®ä¸‹ä½å·¥ç¨‹è¡¨
Level 4: è©³ç´°å·¥ç¨‹è¡¨ï¼ˆDetail Process Tableï¼‰
   â†“ ã“ã‚Œä»¥ä¸Šåˆ†è§£ä¸å¯ï¼ˆæœ€å¤§4éšå±¤ï¼‰
```

**é‡è¦**:
- âŒ ã€Œç„¡åˆ¶é™ãƒã‚¹ãƒˆéšå±¤ã€ã§ã¯ãªã„
- âœ… ã€Œ4æ®µéšå›ºå®šéšå±¤ã€ãŒæ­£ã—ã„
- å„å·¥ç¨‹ã¯ **0ã¾ãŸã¯1ã¤** ã®ä¸‹ä½å·¥ç¨‹è¡¨ã‚’æŒã¤ï¼ˆæœ‰é™éšå±¤ï¼‰

### 3. ãƒ‡ãƒ¼ã‚¿ã®ä¸€è²«æ€§

- ACIDç‰¹æ€§ã‚’ä¿è¨¼ã™ã‚‹SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ã«ã‚ˆã‚‹æ•´åˆæ€§ä¿è¨¼
- å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã«ã‚ˆã‚‹å‚ç…§æ•´åˆæ€§

### 4. æš—é»™çš„ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼ˆPhase 8ï¼‰

å¾“æ¥ã®**3å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ â†’ ã‚°ãƒ«ãƒ¼ãƒ—ãƒ†ãƒ¼ãƒ–ãƒ« â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’**2å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã«ç°¡ç´ åŒ–ã€‚

**Phase 6ã¾ã§**:
```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
 â”œâ”€ å·¥ç¨‹è¡¨ã‚°ãƒ«ãƒ¼ãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆProcessTableï¼‰
 â”‚   â””â”€ å·¥ç¨‹ï¼ˆProcessï¼‰
 â”œâ”€ ãƒ•ãƒ­ãƒ¼å›³ã‚°ãƒ«ãƒ¼ãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆBpmnDiagramTableï¼‰
 â”‚   â””â”€ BPMNãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ï¼ˆBpmnDiagramï¼‰
 â””â”€ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆManualTableï¼‰
     â””â”€ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼ˆManualï¼‰
```

**Phase 8ï¼ˆç¾åœ¨ï¼‰**:
```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
 â”œâ”€ å·¥ç¨‹ï¼ˆProcessï¼‰
 â”œâ”€ BPMNãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ï¼ˆBpmnDiagramï¼‰
 â””â”€ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼ˆManualï¼‰
```

- ã‚°ãƒ«ãƒ¼ãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ **å‰Šé™¤**
- `parentEntityId` ã«ã‚ˆã‚‹ **æš—é»™çš„ãªã‚°ãƒ«ãƒ¼ãƒ—åŒ–**
- å·¥ç¨‹è¡¨ = åŒã˜ `parentEntityId` ã‚’æŒã¤å·¥ç¨‹ã®é›†åˆ

---

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Electron (Main Process)                    â”‚
â”‚  - ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç®¡ç†                                        â”‚
â”‚  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹                               â”‚
â”‚  - IPCé€šä¿¡                                              â”‚
â”‚  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œï¼ˆSQLiteï¼‰                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ IPC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Next.js (Renderer Process)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      React Components (NextUI v2.8)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          State Management (Zustand)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Business Logic Layer               â”‚   â”‚
â”‚  â”‚  - Excel Handler (SheetJS)                      â”‚   â”‚
â”‚  â”‚  - BPMN Handler (bpmn-js)                       â”‚   â”‚
â”‚  â”‚  - Process Sync Engine (BPMN â‡” å·¥ç¨‹è¡¨)         â”‚   â”‚
â”‚  â”‚  - Manual Generator (å·¥ç¨‹è¡¨ â†’ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«)       â”‚   â”‚
â”‚  â”‚  - Version Control                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Local Storage Layer                        â”‚
â”‚  - SQLite (ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)                            â”‚
â”‚  - File System (Excel, BPMN, Manuals)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼è²¬å‹™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | è²¬å‹™ | æŠ€è¡“ |
|---------|------|------|
| **Presentation Layer** | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | React, NextUI, Tailwind CSS |
| **State Management Layer** | çŠ¶æ…‹ç®¡ç†ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ | Zustand |
| **Business Logic Layer** | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ‡ãƒ¼ã‚¿å¤‰æ› | TypeScript |
| **Data Access Layer** | ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã€ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ | better-sqlite3, fs/promises |
| **Desktop Layer** | ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—æ©Ÿèƒ½ã€OSçµ±åˆ | Electron |

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### æ ¸å¿ƒã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

#### Projectï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰

```typescript
interface Project {
  id: string;
  name: string;
  description?: string;
  createdAt: Date;
  updatedAt: Date;
}
```

#### HierarchicalEntityï¼ˆéšå±¤ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åŸºåº•å‹ï¼‰

Phase 8ã§å°å…¥ã•ã‚ŒãŸåŸºåº•ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼š

```typescript
interface HierarchicalEntity {
  id: string;
  projectId: string;
  name: string;
  level: ProcessLevel; // 'large' | 'medium' | 'small' | 'detail'
  
  // åŒéšå±¤å†…ã®è¦ªå­é–¢ä¿‚
  parentId?: string | null;
  
  // è©³ç´°è¡¨ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 8ï¼‰
  detailTableId?: string | null;      // ã“ã®å·¥ç¨‹ãŒæŒã¤è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID
  parentEntityId?: string | null;     // ã“ã®å·¥ç¨‹ãŒå±ã™ã‚‹è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID
  
  // ä¸‰ä½ä¸€ä½“åŒæœŸ
  syncBpmn?: boolean;
  syncManual?: boolean;
  
  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  displayOrder: number;
  createdAt: Date;
  updatedAt: Date;
}
```

#### Processï¼ˆå·¥ç¨‹ï¼‰

```typescript
interface Process extends HierarchicalEntity {
  // BPMNé€£æºï¼ˆ1å¯¾1å¯¾å¿œï¼‰
  bpmnDiagramId?: string;           // å¯¾å¿œã™ã‚‹BPMNãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ã®ID
  bpmnElementId?: string;           // å¯¾å¿œã™ã‚‹BPMNã‚¿ã‚¹ã‚¯ã®ID
  
  // ãƒ¬ãƒ™ãƒ«å›ºæœ‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  departmentName?: string;          // large
  departmentCode?: string;          // large
  employeeName?: string;            // medium
  position?: string;                // medium
  formType?: string;                // small
  formNumber?: string;              // small
  requiredTime?: number;            // detail
  checkpoint?: string;              // detail
  
  // ã‚«ã‚¹ã‚¿ãƒ åˆ—
  customColumns?: Record<string, any>;
  
  // Manualé€£æº
  hasManual?: boolean;
  manualId?: string;
  
  // ãã®ä»–
  department?: string;
  assignee?: string;
  documentType?: string;
  startDate?: Date;
  endDate?: Date;
  status?: string;
  description?: string;
}
```

#### BpmnDiagramï¼ˆBPMNãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ï¼‰

```typescript
interface BpmnDiagram extends HierarchicalEntity {
  // Processé€£æºï¼ˆ1å¯¾1å¯¾å¿œï¼‰
  processId?: string;               // å¯¾å¿œã™ã‚‹å·¥ç¨‹ã®ID
  
  // BPMNå›ºæœ‰
  xmlContent: string;               // BPMN 2.0 XML
  version: number;
  filePath?: string;
  svgPreview?: string;              // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨SVG
}
```

#### Manualï¼ˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼‰

```typescript
interface Manual extends HierarchicalEntity {
  // Processé€£æº
  processId?: string;               // å¯¾å¿œã™ã‚‹å·¥ç¨‹ã®ID
  
  // Manualå›ºæœ‰
  content: string;                  // Markdownå½¢å¼
  version: number;
  sections?: ManualSection[];
}

interface ManualSection {
  id: string;
  manualId: string;
  title: string;
  content: string;
  parentSectionId?: string;
  displayOrder: number;
  createdAt: Date;
  updatedAt: Date;
}
```

---

## éšå±¤æ§‹é€ ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 8ï¼‰

### è©³ç´°è¡¨ã®æ¦‚å¿µ

å·¥ç¨‹è¡¨ã¯ **æš—é»™çš„** ã«å­˜åœ¨ã—ã¾ã™ï¼š

```typescript
// å·¥ç¨‹è¡¨ = åŒã˜ parentEntityId ã‚’æŒã¤å·¥ç¨‹ã®é›†åˆ
type ProcessTable = {
  rootId: string;              // è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆIDï¼ˆä¾‹: root_1729324800000_abcï¼‰
  level: ProcessLevel;         // large | medium | small | detail
  processes: Process[];        // ã“ã®å·¥ç¨‹è¡¨ã«å±ã™ã‚‹å·¥ç¨‹ã®ãƒªã‚¹ãƒˆ
  parentProcess?: Process;     // è¦ªå·¥ç¨‹ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
};
```

### éšå±¤æ§‹é€ ã®ä¾‹

```
å¤§å·¥ç¨‹è¡¨: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆA
  â”œâ”€ å¤§å·¥ç¨‹1ã€Œè¨­è¨ˆã€(detailTableId: root_abc)
  â”‚   â””â”€ è©³ç´°è¡¨ï¼ˆä¸­å·¥ç¨‹è¡¨ rootId: root_abcï¼‰
  â”‚       â”œâ”€ ä¸­å·¥ç¨‹1ã€Œè¦ä»¶å®šç¾©ã€(parentEntityId: root_abc, detailTableId: root_def)
  â”‚       â”‚   â””â”€ è©³ç´°è¡¨ï¼ˆå°å·¥ç¨‹è¡¨ rootId: root_defï¼‰
  â”‚       â”‚       â”œâ”€ å°å·¥ç¨‹1ã€Œãƒ’ã‚¢ãƒªãƒ³ã‚°ã€(parentEntityId: root_def, detailTableId: root_ghi)
  â”‚       â”‚       â”‚   â””â”€ è©³ç´°è¡¨ï¼ˆè©³ç´°å·¥ç¨‹è¡¨ rootId: root_ghiï¼‰
  â”‚       â”‚       â”‚       â”œâ”€ è©³ç´°å·¥ç¨‹1ã€Œé¡§å®¢è¨ªå•ã€(parentEntityId: root_ghi)
  â”‚       â”‚       â”‚       â””â”€ è©³ç´°å·¥ç¨‹2ã€Œè­°äº‹éŒ²ä½œæˆã€(parentEntityId: root_ghi)
  â”‚       â”‚       â””â”€ å°å·¥ç¨‹2ã€Œè¦ä»¶æ›¸ä½œæˆã€(parentEntityId: root_def)
  â”‚       â””â”€ ä¸­å·¥ç¨‹2ã€ŒåŸºæœ¬è¨­è¨ˆã€(parentEntityId: root_abc)
  â””â”€ å¤§å·¥ç¨‹2ã€Œé–‹ç™ºã€
```

### ãƒ¬ãƒ™ãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆ4æ®µéšå›ºå®šï¼‰

è©³ç´°è¡¨ä½œæˆæ™‚ã€è¦ªã®ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦å­ã®ãƒ¬ãƒ™ãƒ«ãŒè‡ªå‹•æ±ºå®šï¼š

```typescript
const LEVEL_MAPPING = {
  large: 'medium',   // å¤§å·¥ç¨‹ã®è©³ç´°è¡¨ â†’ ä¸­å·¥ç¨‹è¡¨
  medium: 'small',   // ä¸­å·¥ç¨‹ã®è©³ç´°è¡¨ â†’ å°å·¥ç¨‹è¡¨
  small: 'detail',   // å°å·¥ç¨‹ã®è©³ç´°è¡¨ â†’ è©³ç´°å·¥ç¨‹è¡¨
  detail: null       // è©³ç´°å·¥ç¨‹ã¯è©³ç´°è¡¨ã‚’ä½œæˆä¸å¯ï¼ˆæœ€å¤§4éšå±¤ï¼‰
};
```

**é‡è¦**: è©³ç´°å·¥ç¨‹ï¼ˆdetailï¼‰ã¯æœ€ä¸‹å±¤ã®ãŸã‚ã€ãã‚Œä»¥ä¸Šã®è©³ç´°è¡¨ã¯ä½œæˆã§ãã¾ã›ã‚“ã€‚

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆMigration 006ï¼‰

```sql
-- è©³ç´°è¡¨ã‚·ã‚¹ãƒ†ãƒ ç”¨ã‚«ãƒ©ãƒ è¿½åŠ 
ALTER TABLE processes ADD COLUMN detail_table_id TEXT;
ALTER TABLE processes ADD COLUMN parent_entity_id TEXT;

ALTER TABLE bpmn_diagrams ADD COLUMN detail_table_id TEXT;
ALTER TABLE bpmn_diagrams ADD COLUMN parent_entity_id TEXT;

ALTER TABLE manuals ADD COLUMN detail_table_id TEXT;
ALTER TABLE manuals ADD COLUMN parent_entity_id TEXT;

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_processes_detail_table_id ON processes(detail_table_id);
CREATE INDEX idx_processes_parent_entity_id ON processes(parent_entity_id);
CREATE INDEX idx_bpmn_diagrams_detail_table_id ON bpmn_diagrams(detail_table_id);
CREATE INDEX idx_bpmn_diagrams_parent_entity_id ON bpmn_diagrams(parent_entity_id);
CREATE INDEX idx_manuals_detail_table_id ON manuals(detail_table_id);
CREATE INDEX idx_manuals_parent_entity_id ON manuals(parent_entity_id);
```

---

## ä¸‰ä½ä¸€ä½“åŒæœŸã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 6ï¼‰

### æ¦‚è¦

Processï¼ˆå·¥ç¨‹ï¼‰â‡” BpmnDiagram â‡” Manual ã‚’è‡ªå‹•é€£æºã™ã‚‹åŒæœŸã‚·ã‚¹ãƒ†ãƒ ã€‚

### åŒæœŸæ–¹å‘

| åŒæœŸæ–¹å‘ | èª¬æ˜ | ãƒˆãƒªã‚¬ãƒ¼ |
|---------|------|---------|
| **BPMN â†’ Process** | BPMNã‚¿ã‚¹ã‚¯ã‚’å·¥ç¨‹ã«å¤‰æ› | BPMNã‚¨ãƒ‡ã‚£ã‚¿ã§ã®ç·¨é›† |
| **Process â†’ BPMN** | å·¥ç¨‹ã‹ã‚‰BPMNã‚’ç”Ÿæˆ | å·¥ç¨‹è¡¨ã§ã®ç·¨é›† |
| **Process â†’ Manual** | å·¥ç¨‹ã‹ã‚‰ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ç”Ÿæˆ | å·¥ç¨‹è¡¨ã§ã®ç·¨é›† |
| **Full Sync** | 3ã¤ã‚’ä¸€æ‹¬åŒæœŸ | æ‰‹å‹•å®Ÿè¡Œ |

### åŒæœŸã®ãƒ«ãƒ¼ãƒ«

1. **å·¥ç¨‹ã‚’è¿½åŠ ** â†’ å¯¾å¿œã™ã‚‹BPMNã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•ç”Ÿæˆ
2. **å·¥ç¨‹ã‚’å‰Šé™¤** â†’ å¯¾å¿œã™ã‚‹BPMNã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•å‰Šé™¤
3. **å·¥ç¨‹ã‚’æ›´æ–°** â†’ å¯¾å¿œã™ã‚‹BPMNã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•æ›´æ–°
4. **BPMNã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ** â†’ å¯¾å¿œã™ã‚‹å·¥ç¨‹ã‚’è‡ªå‹•ç”Ÿæˆ
5. **BPMNã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤** â†’ å¯¾å¿œã™ã‚‹å·¥ç¨‹ã‚’è‡ªå‹•å‰Šé™¤
6. **BPMNã‚¿ã‚¹ã‚¯ã‚’æ›´æ–°** â†’ å¯¾å¿œã™ã‚‹å·¥ç¨‹ã‚’è‡ªå‹•æ›´æ–°

### åŒæœŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

#### BPMN â†’ Process

```
1. BPMN XMLã‚’è§£æ
2. ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯è¦ç´ ã‚’æŠ½å‡º
3. æ—¢å­˜ã®å·¥ç¨‹ã¨ bpmn_element_id ã§ãƒãƒƒãƒãƒ³ã‚°
4. æ–°è¦ã‚¿ã‚¹ã‚¯ â†’ æ–°è¦å·¥ç¨‹ä½œæˆ
5. å‰Šé™¤ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ â†’ å·¥ç¨‹å‰Šé™¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
6. æ›´æ–°ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ â†’ å·¥ç¨‹æ›´æ–°
```

#### Process â†’ BPMN

```
1. å·¥ç¨‹ãƒªã‚¹ãƒˆã‚’å–å¾—
2. å„å·¥ç¨‹ã«å¯¾ã—ã¦BPMNã‚¿ã‚¹ã‚¯ã‚’ç”Ÿæˆ
3. å·¥ç¨‹ã®éšå±¤æ§‹é€ ã‚’BPMNã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãƒ•ãƒ­ãƒ¼ã«å¤‰æ›
4. BPMN XMLã‚’ç”Ÿæˆ
5. æ—¢å­˜BPMNãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ã«åæ˜ 
```

#### Process â†’ Manual

```
1. å°å·¥ç¨‹ãƒ»è©³ç´°å·¥ç¨‹ã‚’å–å¾—ï¼ˆlevel: small ã¾ãŸã¯ detailï¼‰
2. å„å·¥ç¨‹ã‚’ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å¤‰æ›
3. éšå±¤æ§‹é€ ã‚’ä¿æŒã—ã¦Markdownå½¢å¼ã§å‡ºåŠ›
4. å›³è¡¨ãƒ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’è‡ªå‹•ç”Ÿæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Next.js | 14.2.18 | React SSG/SSR |
| **UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒª** | React | 18.3.1 | UIæ§‹ç¯‰ |
| **UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** | NextUI | 2.8.5 | ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ  |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** | Tailwind CSS | 3.4.15 | ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£CSS |
| **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³** | Framer Motion | 11.13.5 | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **çŠ¶æ…‹ç®¡ç†** | Zustand | 5.0.2 | ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ |
| **å‹ãƒã‚§ãƒƒã‚¯** | TypeScript | 5.7.2 | å‹å®‰å…¨æ€§ |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—** | Electron | 33.2.0 | ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | better-sqlite3 | 11.8.1 | SQLiteãƒ‰ãƒ©ã‚¤ãƒ |
| **ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†** | SheetJS (xlsx) | 0.18.5 | Excelèª­ã¿æ›¸ã |
| **BPMN** | bpmn-js | 17.12.0 | BPMNã‚¨ãƒ‡ã‚£ã‚¿ |

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **ãƒ“ãƒ«ãƒ‰** | electron-builder | 25.1.8 | ã‚¢ãƒ—ãƒªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚° |
| **ãƒªãƒ³ã‚¿ãƒ¼** | ESLint | 9.18.0 | ã‚³ãƒ¼ãƒ‰å“è³ª |
| **ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼** | Prettier | ï¼ˆè¨­å®šå¯èƒ½ï¼‰ | ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ |

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ERDï¼ˆEntity Relationship Diagramï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  projects   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚  processes  â”‚â†â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚ detail_table_id
       â”‚          â”‚
       â”‚ 1:1      â”‚
       â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bpmn_diagrams   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bpmn_elements   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       â”‚
       â”‚ 1:N
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚   manuals   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  manual_sections   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

#### projects

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---|------|------|
| id | TEXT | PRIMARY KEY | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| name | TEXT | NOT NULL | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå |
| description | TEXT | | èª¬æ˜ |
| created_at | INTEGER | NOT NULL | ä½œæˆæ—¥æ™‚ï¼ˆUnix timestampï¼‰ |
| updated_at | INTEGER | NOT NULL | æ›´æ–°æ—¥æ™‚ï¼ˆUnix timestampï¼‰ |
| metadata | TEXT | | è¿½åŠ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONï¼‰ |

#### processes

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---|------|------|
| id | TEXT | PRIMARY KEY | å·¥ç¨‹ID |
| project_id | TEXT | FK, NOT NULL | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| name | TEXT | NOT NULL | å·¥ç¨‹å |
| level | TEXT | CHECK | 'large', 'medium', 'small', 'detail' |
| parent_id | TEXT | FK | åŒéšå±¤å†…ã®è¦ªå·¥ç¨‹ID |
| detail_table_id | TEXT | | è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID |
| parent_entity_id | TEXT | | å±ã™ã‚‹è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID |
| bpmn_diagram_id | TEXT | FK | å¯¾å¿œã™ã‚‹BPMNãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ID |
| bpmn_element_id | TEXT | FK | å¯¾å¿œã™ã‚‹BPMNã‚¿ã‚¹ã‚¯ID |
| manual_id | TEXT | FK | å¯¾å¿œã™ã‚‹ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ID |
| display_order | INTEGER | NOT NULL | è¡¨ç¤ºé †åº |
| created_at | INTEGER | NOT NULL | ä½œæˆæ—¥æ™‚ |
| updated_at | INTEGER | NOT NULL | æ›´æ–°æ—¥æ™‚ |
| metadata | TEXT | | è¿½åŠ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONï¼‰ |

#### bpmn_diagrams

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---|------|------|
| id | TEXT | PRIMARY KEY | BPMNãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ID |
| project_id | TEXT | FK, NOT NULL | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| process_id | TEXT | FK | å¯¾å¿œã™ã‚‹å·¥ç¨‹ID |
| name | TEXT | NOT NULL | ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ å |
| xml_content | TEXT | NOT NULL | BPMN 2.0 XML |
| version | INTEGER | NOT NULL | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå· |
| file_path | TEXT | | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| detail_table_id | TEXT | | è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID |
| parent_entity_id | TEXT | | å±ã™ã‚‹è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID |
| created_at | INTEGER | NOT NULL | ä½œæˆæ—¥æ™‚ |
| updated_at | INTEGER | NOT NULL | æ›´æ–°æ—¥æ™‚ |

#### manuals

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---|------|------|
| id | TEXT | PRIMARY KEY | ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ID |
| project_id | TEXT | FK, NOT NULL | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| process_id | TEXT | FK | å¯¾å¿œã™ã‚‹å·¥ç¨‹ID |
| name | TEXT | NOT NULL | ãƒãƒ‹ãƒ¥ã‚¢ãƒ«å |
| content | TEXT | NOT NULL | Markdownå½¢å¼ã®å†…å®¹ |
| version | INTEGER | NOT NULL | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå· |
| detail_table_id | TEXT | | è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID |
| parent_entity_id | TEXT | | å±ã™ã‚‹è©³ç´°è¡¨ã®ãƒ«ãƒ¼ãƒˆID |
| created_at | INTEGER | NOT NULL | ä½œæˆæ—¥æ™‚ |
| updated_at | INTEGER | NOT NULL | æ›´æ–°æ—¥æ™‚ |

---

## APIè¨­è¨ˆ

### IPCé€šä¿¡ï¼ˆElectronï¼‰

#### Process API

```typescript
// è©³ç´°è¡¨ä½œæˆ
window.electronAPI.process.createDetailTable({
  entityId: string,
  syncBpmn?: boolean,      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true
  syncManual?: boolean     // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true
}): Promise<{ processDetailTable: { id: string } }>

// è©³ç´°è¡¨å–å¾—
window.electronAPI.process.getDetailTable(
  entityId: string
): Promise<DetailTable<Process> | null>

// è¦ªã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å–å¾—
window.electronAPI.process.getParentEntity(
  rootId: string
): Promise<Process | null>

// å·¥ç¨‹ä½œæˆ
window.electronAPI.process.create(
  data: CreateProcessDto
): Promise<Process>

// å·¥ç¨‹æ›´æ–°
window.electronAPI.process.update(
  id: string,
  data: UpdateProcessDto
): Promise<Process>

// å·¥ç¨‹å‰Šé™¤
window.electronAPI.process.delete(
  id: string
): Promise<boolean>

// å·¥ç¨‹ä¸€è¦§å–å¾—
window.electronAPI.process.getByProject(
  projectId: string
): Promise<Process[]>
```

#### BPMN API

```typescript
// BPMNä½œæˆ
window.electronAPI.bpmn.create(
  data: CreateBpmnDto
): Promise<BpmnDiagram>

// BPMNæ›´æ–°
window.electronAPI.bpmn.update(
  id: string,
  data: UpdateBpmnDto
): Promise<BpmnDiagram>

// BPMNå‰Šé™¤
window.electronAPI.bpmn.delete(
  id: string
): Promise<boolean>

// è©³ç´°è¡¨ä½œæˆ
window.electronAPI.bpmn.createDetailTable({
  entityId: string,
  syncProcess?: boolean,
  syncManual?: boolean
}): Promise<{ bpmnDetailTable: { id: string } }>
```

#### Sync API

```typescript
// BPMN â†’ Process åŒæœŸ
window.electronAPI.sync.bpmnToProcesses(
  projectId: string,
  bpmnXml: string,
  options?: SyncOptions
): Promise<SyncResult>

// Process â†’ BPMN åŒæœŸ
window.electronAPI.sync.processesToBpmn(
  projectId: string,
  bpmnId: string,
  options?: SyncOptions
): Promise<SyncResult>

// åŒæ–¹å‘åŒæœŸ
window.electronAPI.sync.bidirectional(
  projectId: string,
  bpmnId: string,
  bpmnXml: string,
  options?: SyncOptions
): Promise<SyncResult>

interface SyncResult {
  created: number;
  updated: number;
  deleted: number;
  errors: string[];
}
```

---

## ä»˜éŒ²

### ProcessLevelå®šç¾©

```typescript
type ProcessLevel = 'large' | 'medium' | 'small' | 'detail';
```

### DetailTableå‹

```typescript
type DetailTable<T> = {
  root: T;                // ãƒ«ãƒ¼ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
  entities: T[];          // è©³ç´°è¡¨ã«å±ã™ã‚‹ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
  parentEntity: T | null; // è¦ªã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆã•ã‚‰ã«ä¸Šä½ã®éšå±¤ï¼‰
};
```

### ãƒ«ãƒ¼ãƒˆIDå½¢å¼

```
root_${timestamp}_${random}

ä¾‹: root_1729324800000_abc123
```

---

## å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [è¦ä»¶å®šç¾©æ›¸](./REQUIREMENTS.md)
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰](./DEVELOPMENT.md)
- [ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ToDo](./REFACTORING_TODO.md)
- [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](./USER_GUIDE.md)
